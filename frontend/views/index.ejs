<!-- frontend/views/index.ejs -->

<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ecomerse-Soft</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="stylesheet" href="/css/styles.css">
  <link rel="stylesheet" href="/css/panel.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var dropdowns = document.querySelectorAll('.dropdown-submenu');
      dropdowns.forEach(function (dropdown) {
        dropdown.addEventListener('mouseenter', function () {
          var submenu = this.querySelector('.dropdown-menu');
          if (submenu) {
            submenu.classList.add('show');
          }
        });
        dropdown.addEventListener('mouseleave', function () {
          var submenu = this.querySelector('.dropdown-menu');
          if (submenu) {
            submenu.classList.remove('show');
          }
        });
      });
    });
  </script>
  
</head>
<body>
  
  <!-- Include Header Partial -->
  <%- include('partials/header') %>

  <!-- Main Banner with Slider -->
  <header class="bg-success text-white text-center py-5">
    <div class="container">
      <h1>Bienvenido a Ecomerse-Soft</h1>
      <p>La mejor plataforma para la venta de productos agrícolas</p>
    </div>
  </header>

  <!-- Slider de Ofertas -->
  <section class="container my-5">
    <h2 class="text-center mb-4">En Temporada Actualmente</h2>
    <div id="offerCarousel" class="carousel slide" style="max-width: 75%; margin: 0 auto;" data-bs-ride="carousel">
      <div class="carousel-inner">
        <div class="carousel-item active">
          <img src="/images/yuca.jpg" class="d-block w-100" style="max-width: 75%; margin: 0 auto;" alt="Oferta 1">
        </div>
        <div class="carousel-item">
          <img src="/images/platano.jpg" class="d-block w-100" style="max-width: 75%; margin: 0 auto;" alt="Oferta 2">
        </div>
        <div class="carousel-item">
          <img src="/images/maiz.jpg" class="d-block w-100" style="max-width: 75%; margin: 0 auto;" alt="Oferta 3">
        </div>
        <div class="carousel-item">
          <img src="/images/aguacate.jpg" class="d-block w-100" style="max-width: 75%; margin: 0 auto;" alt="Oferta 4">
        </div>
      </div>
      <button class="carousel-control-prev" type="button" data-bs-target="#offerCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Anterior</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#offerCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Siguiente</span>
      </button>
    </div>
  </section>

  <!-- Navigation Bar with Dropdown Menu -->
  <nav class="bg-light py-2">
    <div class="container d-flex justify-content-between">
      <div class="dropdown">
        <a class="text-primary dropdown-toggle" href="#" role="button" id="categoriesDropdown" data-bs-toggle="dropdown" aria-expanded="false">
          <i class="fas fa-cogs"></i>
          Categorías
        </a>
        <ul class="dropdown-menu" aria-labelledby="categoriesDropdown">
          <li><a class="dropdown-item" href="/products/category/yuca">Yuca</a></li>
          <li><a class="dropdown-item" href="/products/category/plátano">Plátano</a></li>
          <li class="dropdown-submenu">
            <a class="dropdown-item dropdown-toggle" href="#">Ñame</a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="/products/category/ñame?subcategory=ñame%20espino">Ñame Espino</a></li>
              <li><a class="dropdown-item" href="/products/category/ñame?subcategory=ñame%20diamante">Ñame Diamante</a></li>
            </ul>
          </li>
          <li class="dropdown-submenu">
            <a class="dropdown-item dropdown-toggle" href="#">Maíz</a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="/products/category/maíz?subcategory=maíz%20amarillo">Maíz Amarillo</a></li>
              <li><a class="dropdown-item" href="/products/category/maíz?subcategory=maíz%20blanco">Maíz Blanco</a></li>
              <li><a class="dropdown-item" href="/products/category/maíz?subcategory=maíz%20dulce">Maíz Dulce</a></li>
            </ul>
          </li>
        </ul>
      </div>
      <a href="#" class="text-dark">
        <i class="fas fa-gift"></i>Ofertas</a>
      <a href="#" class="text-dark">
        <i class="fas fa-heart"></i>Productos Populares</a>
      <a href="#" class="text-dark">
        <i class="fas fa-star"></i>Nuevas Llegadas</a>
    </div>
  </nav>

  <!-- Featured Products Section -->
  <section class="container my-5">
    <h3 class="text-center mb-4">Nuestros Productos Destacados</h3>
    <div class="row">
      <% products.forEach(product => { %>
        <div class="col-md-4 mb-4">
          <div class="card h-100">
            <img src="/uploads/<%= product.image || 'default-product.jpg' %>" class="card-img-top" alt="<%= product.name %>">
            <div class="card-body text-center">
              <h5 class="card-title"><%= product.name %></h5>
              <p class="card-text">Precio: $<%= product.price %></p>
              <a href="/products/detail/<%= product._id %>" class="btn btn-primary">Ver Producto</a>
            </div>
          </div>
        </div>
      <% }); %>
    </div>
  </section>

  <!-- Popular Categories Section -->
  <section class="container my-5">
    <h3 class="text-center mb-4">Categorías Populares</h3>
    <div class="row text-center">
      <div class="col-md-3">
        <img src="/images/yuca.webp" alt="Yuca" class="img-fluid mb-2">
        <a href="/products/category/yuca"><h6>Yuca</h6></a>
      </div>
      <div class="col-md-3">
        <img src="/images/platano.webp" alt="Plátano" class="img-fluid mb-2">
        <a href="/products/category/plátano"><h6>Plátano</h6></a>
      </div>
      <div class="col-md-3">
        <img src="/images/ñame.webp" alt="Ñame" class="img-fluid mb-2">
        <a href="/products/category/ñame"><h6>Ñame</h6></a>
      </div>
      <div class="col-md-3">
        <img src="/images/maiz.webp" alt="Maíz" class="img-fluid mb-2">
        <a href="/products/category/maíz"><h6>Maíz</h6></a>
      </div>
    </div>
  </section>

  <!-- Include Footer Partial -->
  <%- include('partials/footer') %>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

</body>
</html>
